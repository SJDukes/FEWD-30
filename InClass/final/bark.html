<!Doctype HTML>
<html>
  <head>
    <title>BarkPark</title>
    <link rel="stylesheet" href="stylesheets/all.css" media="screen">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>


  </head>
  <body>
    <main>
      <header class="header">
        <img id="logo" src="images/logo.png" width="140 " height="200" alt="logo" />
        <div>
          <form class="form-options" action="index.html" method="post">
            <select class="drop-downs" name="select">
              <option value="value1">Small Parks</option>
              <option value="value2" selected>All</option>
              <option value="value3">Big Parks</option>
            </select>
            <select class="drop-downs dog-size" name="select">
              <option value="value1">Small Dogs</option>
              <option value="value2" selected>All</option>
              <option value="value3">Big Dogs</option>
            </select>
            <select class="drop-downs" name="select">
              <option value="value1">On Leash</option>
              <option value="value2" selected>All</option>
              <option value="value3">Off Leash</option>
            </select>
            <input class="buttons"type="submit" value="Submit">
          </form>
        </div>
      </header>
      <div id="map">

      </div>
    </main>
    <footer><p>
      Woof! 2015
    </p></footer>

    <script type="text/javascript">
    var map = L.map('map', {
        center: [37.749, -122.443],
        zoom: 12
    });

    var accessToken = 'pk.eyJ1Ijoic2R1a2VzIiwiYSI6ImZuTW80czQifQ.3pf72TkZauDP9mbYqlcIXQ';
    var url = 'https://{s}.tiles.mapbox.com/v4/sdukes.m8434ap4/{z}/{x}/{y}.png?access_token=' + accessToken;
    var tileLayer = L.tileLayer(url, {
       attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
     }).addTo(map);
     var geoJsonLayer;
     $.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(data) {
         // Now that we've got our data we can just let leaflet read it and add it to the map
         geoJsonLayer = L.geoJson(data, {
           onEachFeature: function(feature, layer) {
             layer.bindPopup(feature.properties.title + ' ' +
             '<br>' + feature.properties.description +
             '<br>' + feature.properties.Acreage + ' Acres'
             );
           },
            //  style: function(feature) {
            //    var color = 'blue';
            //    if (feature.properties.marker-color === '63b6e5') {
            //      color = 'orange';
            //    }
            //    return{
            //      color: color
            //    }
            //  }
         }).addTo(map);
        // console.log(data);
     });







     function bigParks () {
       geoJsonLayer.clearLayers()
     $.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(Acres) {
       console.log(Acres);
       var featureCollection = {
         features: [],
         type: "FeatureCollection"
       };

        for (var i = 0; i < Acres.features.length; i++) {
          if (Acres.features[i].properties.Acreage > 1) {
            featureCollection.features.push(Acres.features[i]);
          }
        }

        L.geoJson(featureCollection).addTo(map);
     });
   }


   function smallParks () {
     geoJsonLayer.clearLayers()
   $.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(Acres) {
     console.log(Acres);
     var featureCollection = {
       features: [],
       type: "FeatureCollection"
     };

      for (var i = 0; i < Acres.features.length; i++) {
        if (Acres.features[i].properties.Acreage < 1) {
          featureCollection.features.push(Acres.features[i]);
        }
      }

      L.geoJson(featureCollection).addTo(map);
   });
 }

 function smallDogs () {
   geoJsonLayer.clearLayers()
 $.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(Acres) {
   console.log(Acres);
   var featureCollection = {
     features: [],
     type: "FeatureCollection"
   };

    for (var i = 0; i < Acres.features.length; i++) {
      if (Acres.features[i].properties.ParkServiceArea === "PSA 1" || Acres.features[i].properties.ParkType === "Mini Park") {
        featureCollection.features.push(Acres.features[i]);
      }
    }

    L.geoJson(featureCollection).addTo(map);
 });
}

function bigDogs () {
  geoJsonLayer.clearLayers()
$.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(Acres) {
  console.log(Acres);
  var featureCollection = {
    features: [],
    type: "FeatureCollection"
  };

   for (var i = 0; i < Acres.features.length; i++) {
     if (Acres.features[i].properties.ParkServiceArea === "PSA 1" || Acres.features[i].properties.ParkType === "Regional Park") {
       featureCollection.features.push(Acres.features[i]);
     }
   }

   L.geoJson(featureCollection).addTo(map);
 });
}

function offLeash () {
  geoJsonLayer.clearLayers()
$.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(Acres) {
  console.log(Acres);
  var featureCollection = {
    features: [],
    type: "FeatureCollection"
  };

   for (var i = 0; i < Acres.features.length; i++) {
     if (Acres.features[i].properties.ParkType !== "Neighborhood Park or Playground" && Acres.features[i].properties.Acreage > 1) {
       featureCollection.features.push(Acres.features[i]);
     }
   }

   L.geoJson(featureCollection).addTo(map);
 });
}

function onLeash () {
  geoJsonLayer.clearLayers()
$.get('https://a.tiles.mapbox.com/v4/sdukes.m8434ap4/features.json?access_token=' + accessToken, function(Acres) {
  console.log(Acres);
  var featureCollection = {
    features: [],
    type: "FeatureCollection"
  };

   for (var i = 0; i < Acres.features.length; i++) {
     if (Acres.features[i].properties.ParkType === "Neighborhood Park or Playground" && Acres.features[i].properties.Acreage < 1) {
       featureCollection.features.push(Acres.features[i]);
     }
   }

   L.geoJson(featureCollection).addTo(map);
 });
}
  //   map.locate({ setView: true });
    </script>
  </body>
</html>
